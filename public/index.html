<!--
  NOTE: This .html file (and public folder) is optional and can be safely deleted.
  It serves only as a demo/test page.
  
  The chatbot can be embedded directly on any allowed domain using the embed script that
  is generated when starting the server.
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowise Chatbot Widget</title>
</head>

<body>
    <div id="root"></div>
    <script type="module">
        import Chatbot from './web.js'

        // Custom submit function
        const customSubmit = async (body) => {
            console.log("body", body);
            // You can modify the body here
            body.customField = 'custom value';

            // Make your own API call
            const response = await fetch(`${window.location.origin}/api/v1/prediction/${body.chatflowid}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(body)
            });

            const data = await response.json();
            return { data };
        };

        // Initialize chatbot with custom submit function
        Chatbot.init({
            chatflowid: '47449c62-07f9-40c9-8060-76764090648c',    // or 'support', 'salesbot', etc.
            apiHost: 'https://flowise-g0ms.onrender.com',
            chatflowConfig: {
                // Your config here
            },
            onSubmit: (body) => {
                console.log('Modifying body:', body);
                body.customField = 'custom value';
                return body;
            },
        })
    </script>
</body>

</html>